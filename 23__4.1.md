# Форматы данных

Данные - Информация которая представлена в виде пригодном для обработки автоматическими средствами(ПК)
Пример данных - двоичный код.

Формат представления данных в памяти шире любой ЭВМ зависит от его архитиктуре т.к. привязан к машинному слову

Вопрос?
Если мы пробуем выполнить программу собранную под архитектуру с меньшим машинным словом чем наше то что случится?
Ответ
Ничео не случиться она пройдёт по нашему слову а остаток мы заполним нулями.
 Из за этого мы можем запускать 32Бит проги на 64 битной OC 

#Обратный же процесс не возможен т.к. физически процессор для этого не приспособлен.#
 
Данные в пк можно разделить на 3 большие группы

1. Логические коды
2. Числа с фиксированной запятой/точной( Fixed point number)
3. Числа с плавующей запятой/точкой (floating point number)


## Логические коды

Логоические коды могут размещаться

-- В отдельных байтах(0-7)- макс 2^8 = 256 значений
-- Словах от 0 до N-1, где N - Величина машинного слова (Например для 16-битной архитиктуры это 15 разряд)

Широко используються для простого представления чисел
(для простого варианта кодирования 1 симво=8бит=1байт(Алфавит из 256 символов)двоичный код каждого символа = 1 байт памяти)

Логические коды используються для представления

- Символьных величин
- Чисел без знака
- битовых величик (true/false, бинарные данные)

### Символьные величины


В случае с базовой ASCII каждый код занимает 1 байт разряд которого занимает 1 код
(две ссылки)
01001000 01001001 00100001 --> HI!


Расширенные версии таблицы ASCII (коды с 128 по 255)  Могли использоваться для кодирования доп символов.


Это связанно с панятием **кодовой страницы**( Code page) 
Например Code page 437 содержит в себе символы расширенной латиницы.

Много кодов заняты псевдографически символами, поскольку широкое приминение ASCII было тогда когла графические интерфейсы не были ещё широко распространнено.
Поэтому для придания более красивого вида консольным прогам использовалась псевдографика.

Для кирилицы использовалась кодовая страница CP866 ( она была основана как раз на CP437) В ней все символы расширенной латиницы были заменены на Кирилические символы, а остальное оставленно как есть.

Из за этого возникает несовместимость. Например CP437  резервирует десятичный код 141 под символ "i"  Тогда как CP866 использует тот же код для символа "Н" (Кирилической заглавной буквы) отсюда явление <Кракозябр>

в Windows долгое время использовалось (и сейчас используеться) другая кодировка Windows-1251 (CP1251 она же ANSI)

В современном виде кодировка символьной информации осуществляется с помощью 1 байта. Примером такого подхода является Юникод.

Основная кодировка Юникода (UTF-8) использует переменную длину для кодирования символьной информации.


Диапазон номеров        I   кол во октетов
00000000-0000007F       I  1
00000080-000007FF       I  2
00000800-0000FFFF       I  3
00010000-0010FFFF       I  4
___________________________________________________________________

В зависимости от номера старшие биты первого байта выставляються в соответствии с кол вом требуемых байтов для кодировки.

Старшие биты                        I Кол во октетов  I Кол во значимых бит
0xxxxxxx                            I 1               I 7( как в ASCII)
110xxxxx 10xxxxxx                   I 2               I 11
1110xxxx 10xxxxxx 10xxxxxx          I 3               I 16
11110xxx 10xxxxxx 10xxxxxx 10xxxxxx I 4               I 21
______________________________________________________________________

UTF-16 Использует строго 2 актета для всех символов
UTF-32 Строго использует 4 актета для всех символов

Оба формата используються куда реже чем UTF-8 т.к. требуют гараздо больше памяти на 1 символ (Даже NUL) уходит  соответственно 2 и 4 байта.

## Порядок байтов##

Адрес - байт с меньшим порядковым номером.
00000000 FFFFFFFF FFFFFFFF 00EEFFFF
0        1        2        3

#### Порядок бывает трёх видов

1. От старшего к младшему (Big endian BE)
Этот порядок совпадает с привычной записью чисел, когда самый старший разряд стоит левее всего

 Например чсло "четыреста пятьдесять шесть" запишеться при таком порядке как 456

   Он используеться в учебной лит ре по умолчанию, если не указано иное. Он же используеться для протокола TCP/IP (Отсюдв также его называют как "Сетевой порядок")

     Исторически этот порядок также называют " пордок Моторолы" т.к. использовался в широко распрастраненных процессорах Motorola  68000 

       Кодирование с таким порядком используется в форматах PNG, JPG.


2. От младшего к старшему (Little-endian LE)
Самый старший разряд стоит правее всего

Например чсло "четыреста пятьдесять шесть" запишеться при таком порядке как 654
 Этот порядок принят в регламенте ПК на "архитектуре X86 и X86_64"
  Порядок LE удобен для выполнения вычислений т.к. увеличение числа операндов (октетов) при больших машинных словах или изменении точности данных(использовании более точного формата с большим числом байтов для кодирования) не изменяют уже ранее записанные байтый
    Число 263 в 2 битовой формате при LE 
     00000111 00000001

> Быстрый перевод 263 в двоичную 
> Макс в 1 байте 255(11111111)
> 263-255=8
> 8-1 ->111(2)
> 263=256+7 -> 1 00000000(2) + 111(2) -> 100000111(2)

Число 263 в 2 битовой формате при LE 
    00000111 00000001 00000000 00000000

Сравним с BE 

Число 263 в 2 битовой формате при BE
 00000001 00000111
Число 263 в 4 битовой формате при BE
 00000000 00000000 00000001 00000111

Ещё используеться LE
 USB
 PCI (PCI-E)
 GUID (Таблица разделов лиска)
 

3. Смешанный порядок (Middle-endian)
 Возможна реализация смешанного порядка при работе с данными длина которых привышает машинное слово

В этом случае внутри машинного строя порядок сохраняется тот что задал архитектор (например LE) Но сами машинные слова идут в обратном порядке (BE)
Приминяется в ARM Процессорах.

## Переключение порядка 
 В той же архитектуре ARM предусмлтренно переключение порядка байтов, они могут работать как в BE так и в LE. Переключение может быть реализованно как на уровне ОС так и на аппаратном уровне

UTF-16/32 имеют разновидности - UTF-16/32Be и UTF-16/32LE. 

## Числа с фиксированной запятой 
Представление числовой информации в памяти связано с 2 различными форматами

1. с фиксированной точкой/запятой - только целые числв
2. с плавающей точкой/запятой - вещественные чисоа т.е. и целые и дробные

Диапазон целых чисел, которые могут быть представлены в формате числа с фиксированной точкой зависит от размера ячеек памяти, используемых для хранения целых чисел.

В **K-разрядной(битовые разряды) ячейке** может храниться 2^K байта.


#Представление целых чисел в памяти 
 В 32 и 64 бит архитектурах "int" целое число занимает 4 байта 
